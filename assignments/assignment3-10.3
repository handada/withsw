<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>

    <style>

        .shadow {
            display: none;
        }
    </style>
</head>
<body>
    <select name="" id="slct">    //셀렉트태그 아이디slct
        <option value="substr">substr</option>    //문자열 내에서 특정한 문자열의 index 값을 리턴한다
        <option value="upper">upper</option>    //문자열을 대문자로 변환해서 반환
        <option value="lower">lower</option>    //문자열을 소문자로 변환해서 반환
        <option value="indexOf">indexOf</option>    //문자열 내에서 특정한 문자열의 index 값을 리턴한다
        <option value="replace">replace</option>    //문자열을 다른 문자열로 치환한 결과를 리턴
        <option value="split">split</option>    //문자열을 인자로 주어진 문자열일 기준으로 쪼개서 배열에 담는다
    </select>
    <button id="add">추가</button>

    <div id="list"></div>
	<!--list박스에 tmp들이 복사되어 쌓인다.

	shadow란 클래스이름을 가진 div들은 css로 display:none이 되어있어서 안보이지만
	아래 존재하고 있는 것이고 일시적인 tmp변수들이 각각의 shadow들을 복사하여 자식으로 담긴다.
	거기에 classList=""을하면 부모인 shadow는 안보이지만 cloneNode된 tmp들은 보이게 된다.
	-->
	<div class="shadow" id="substr">
        <button class="remove">삭제</button>
        <input type="text" class = "inp1" placeholder = "아무 단어나 적어">
        <input type="text" class = "inp2" placeholder = "몇번째부터 추출할까?">
        <input type="text" class = "inp3" placeholder = "몇개의 문자열을?">
        <span class="result"></span>
    </div>
    <div class="shadow" id="upper">
        <button class="remove">삭제</button>
        <input type="text" class = "inp1" placeholder = "소문자로 아무 글자">
        <span class="result"></span>
    </div>
    <div class="shadow" id="lower">
        <button class="remove">삭제</button>
        <input type="text" class = "inp1" placeholder = "대문자로 아무 글자">
		<span class="result"></span>
    </div>
	<div class="shadow" id="indexOf">
        <button class="remove">삭제</button>
        <input type="text" class = "inp1" placeholder = "stringValue 기준 문자열">
        <input type="text" class = "inp2" placeholder = "stringValue에서 탐색하고 싶은 문자열">
        <input type="text" class = "inp3" placeholder = "(선택)몇번째부터?">
		<span class="result"></span>
    </div>
	<div class="shadow" id="replace">
        <button class="remove">삭제</button>
        <input type="text" class = "inp1" placeholder = "아무 단어나 적어">
		<input type="text" class = "inp2" placeholder = "뻬고 싶은 부분">
        <input type="text" class = "inp3" placeholder = "새롭게 넣은 글자 ">
		<span class="result"></span>

    </div>
	<div class="shadow" id="split">
        <button class="remove">삭제</button>
        <input type="text" class = "inp1" placeholder = "html,css,javascript,jquery,apache,php" readonly value="html,css,javascript,jquery,apache,php">
        <input type="text" class = "inp2" title = "문자열을 분리하는 기준 문자열, 사용하지 않으면 전체 문자열을 하나의 원소로 담고 있는 배열을 리턴한다" placeholder = "분리 기준 문자(추천: 콤마)">
        <input type="text" class = "inp3" title = "limit(숫자)" placeholder = "리턴되는 배열의 숫자를 제한">
		<span class="result"></span>
    </div>

    <script>
        var select = document.getElementById('slct'),
            addBtn = document.getElementById('add'),
            list = document.getElementById('list'),
            s_substr = document.querySelector('.shadow#substr'),
            s_upper = document.querySelector('.shadow#upper'),
            s_lower = document.querySelector('.shadow#lower'),
			s_inxOf = document.querySelector('.shadow#indexOf'),
			s_replc = document.querySelector('.shadow#replace'),
			s_split = document.querySelector('.shadow#split');

        addBtn.onclick = function () {
            switch (select.value) {
                case 'substr':
                    var tmp = s_substr.cloneNode(true);
                    tmp.classList = "";
                    list.appendChild(tmp);
                    var fbtn, inp1, inp2, inp3, rst;
                    tmp.childNodes.forEach(function (value){
                        if(value.className == "remove") {
                            fbtn = value;
                        }
                        if(value.className == "inp1") {
                            inp1 = value;
                        }
                        if(value.className == "inp2") {
                            inp2 = value;
                        }
                        if(value.className == "inp3") {
                            inp3 = value;
                        }
                        if(value.className == "result") {
                            rst = value;
                        }
                    });

                    fbtn.addEventListener('click', function (){
                        list.removeChild(tmp);
                    });

                    tmp.addEventListener('change',  function (){
                        rst.innerText = inp1.value.substr(inp2.value, inp3.value);

                    });

                break;
                case 'upper':
					var tmp = s_upper.cloneNode(true);
					tmp.classList = "";
					list.appendChild(tmp); //tmp를 list의 마지막 자식 요소로 붙임.
					tmp.childNodes.forEach(function (value){
						if(value.className == "remove") {
                            fbtn = value;
                        }
                        if(value.className == "inp1") {
                            inp1 = value;
                        }
                        if(value.className == "result") {
                            rst = value;
                        }
                    });
					fbtn.addEventListener('click', function (){
						list.removeChild(tmp);
					});
					tmp.addEventListener('change', function (){
						rst.innerText = inp1.value.toUpperCase();
					});

                break;
                case 'lower':
				var tmp = s_lower.cloneNode(true);
					tmp.classList = "";
					list.appendChild(tmp); //tmp를 list의 마지막 자식 요소로 붙임.
					tmp.childNodes.forEach(function (value){
						if(value.className == "remove") {
							fbtn = value;
						}
						if(value.className == "inp1") {
							inp1 = value;
						}
						if(value.className == "result") {
							rst = value;
						}
					});
					fbtn.addEventListener('click', function (){
						list.removeChild(tmp);
					});
					tmp.addEventListener('change', function (){
						rst.innerText = inp1.value.toLowerCase();
					});
                break;
                case 'indexOf':
					var tmp = s_inxOf.cloneNode(true);
					tmp.classList = "";
					list.appendChild(tmp);
					var fbtn, inp1, inp2, inp3, rst;
					tmp.childNodes.forEach(function (value){
						if(value.className == "remove") {
							fbtn = value;
						}
						if(value.className == "inp1") {
							inp1 = value;
						}
						if(value.className == "inp2") {
							inp2 = value;
						}
						if(value.className == "inp3") {
							inp3 = value;
						}
						if(value.className == "result") {
							rst = value;
						}
					});
					fbtn.addEventListener('click', function (){
						list.removeChild(tmp);
					});
					tmp.addEventListener('change', function (){
						rst.innerText = inp1.value.indexOf(inp2.value, inp3.value);
					});
                break;
                case 'replace':
					var tmp = s_replc.cloneNode(true);
					tmp.classList = "";
					list.appendChild(tmp);
					var fbtn, inp1, inp2, inp3, rst;
					tmp.childNodes.forEach(function (value){
						if(value.className == "remove") {
							fbtn = value;
						}
						if(value.className == "inp1") {
							inp1 = value;
						}
						if(value.className == "inp2") {
							inp2 = value;
						}
						if(value.className == "inp3") {
							inp3 = value;
						}
						if(value.className == "result") {
							rst = value;
						}
					});
					fbtn.addEventListener('click', function (){
						list.removeChild(tmp);
					});
					tmp.addEventListener('change', function (){
						rst.innerText = inp1.value.replace(inp2.value, inp3.value);
					});

                break;
                case 'split':
					var tmp = s_split.cloneNode(true);
					tmp.classList = "";
					list.appendChild(tmp);
					var fbtn, inp1, inp2, inp3, rst;
					tmp.childNodes.forEach(function (value){
						if(value.className == "remove") {
							fbtn = value;
						}
						if(value.className == "inp1") {
							inp1 = value;
						}
						if(value.className == "inp2") {
							inp2 = value;
						}
						if(value.className == "inp3") {
							inp3 = value;
						}
						if(value.className == "result") {
							rst = value;
						}
					});
					fbtn.addEventListener('click', function (){
						list.removeChild(tmp);
					});
					tmp.addEventListener('change', function (){
						rst.innerText = inp1.value.split(inp2.value, inp3.value);
					});

                break;

            }
        };
    </script>
</body>
</html>
